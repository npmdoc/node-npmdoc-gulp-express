<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/gimm/gulp-express"

    >gulp-express (v0.3.5)</a>
</h1>
<h4>gulp livereload plugin</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.gulp-express">module gulp-express</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-express.notify">
            function <span class="apidocSignatureSpan">gulp-express.</span>notify
            <span class="apidocSignatureSpan">(event)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-express.run">
            function <span class="apidocSignatureSpan">gulp-express.</span>run
            <span class="apidocSignatureSpan">(args, options, livereload)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-express.stop">
            function <span class="apidocSignatureSpan">gulp-express.</span>stop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.gulp-express" id="apidoc.module.gulp-express">module gulp-express</a></h1>


    <h2>
        <a href="#apidoc.element.gulp-express.notify" id="apidoc.element.gulp-express.notify">
        function <span class="apidocSignatureSpan">gulp-express.</span>notify
        <span class="apidocSignatureSpan">(event)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">notify = function (event) {
    if(event &#x26;&#x26; event.path){
        var filepath = path.relative(__dirname, event.path);
        debug(info(&#x27;file(s) changed: %s&#x27;), event.path);
        lr.changed({body: {files: [filepath]}});
    }

    return es.map(function(file, done) {
        var filepath = path.relative(__dirname, file.path);
        debug(info(&#x27;file(s) changed: %s&#x27;), filepath);
        lr.changed({body: {files: [filepath]}});
        done(null, file);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    * `number` - treated as port number of livereload server.
    *  `object` - used to create tiny-lr server `new tinylr.Server(livereload);`.
* Returns a [ChildProcess](http://nodejs.org/api/child_process.html#child_process_class_childprocess) instance of spawned server
.

### server.stop()
Stop the instantiated spawned server programmatically, and the tiny-lr server.

### server.<span class="apidocCodeKeywordSpan">notify</span>([event])
Send a notification to the tiny-lr server in order to trigger a reload on page.
pipe support is added after v0.1.5, so you can also do this:
```js
gulp.src(&#x27;css/*.css&#x27;)
// â€¦
.pipe(gulp.dest(&#x27;public/css/&#x27;))
.pipe(server.notify())
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gulp-express.run" id="apidoc.element.gulp-express.run">
        function <span class="apidocSignatureSpan">gulp-express.</span>run
        <span class="apidocSignatureSpan">(args, options, livereload)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">run = function (args, options, livereload) {
    //deal with args
    if(util.isArray(args) &#x26;&#x26; args.length){
        config.args = args;
    }

    //deal with options
    config.options = merge(config.options, options || {});

    //deal with livereload
    if(livereload === false){   //livereload disabled
        config.livereload = false;
    }else if(livereload){
        if(typeof livereload === &#x27;object&#x27;){
            config.livereload = livereload;
        }else{
            config.livereload.port = livereload;
        }
    }

    if (server) { // server already running
        debug(info(&#x27;kill server&#x27;));
        server.kill(&#x27;SIGKILL&#x27;);
        //server.removeListener(&#x27;exit&#x27;, callback.serverExit);
        server = undefined;
    } else {
        if(config.livereload){
            lr = tinylr(config.livereload);
            lr.listen(config.livereload.port, callback.lrServerReady);
        }
    }

    server = spawn(&#x27;node&#x27;, config.args, config.options);
    server.stdout.setEncoding(&#x27;utf8&#x27;);
    server.stderr.setEncoding(&#x27;utf8&#x27;);

    server.stdout.on(&#x27;data&#x27;, callback.serverLog);
    server.stderr.on(&#x27;data&#x27;, callback.serverError);
    server.once(&#x27;exit&#x27;, callback.serverExit);

    process.listeners(&#x27;exit&#x27;) || process.once(&#x27;exit&#x27;, callback.processExit);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

* v0.1.5
    &#x3e; pipe support added for [server.notify](#servernotifyevent)


## API

### server.<span class="apidocCodeKeywordSpan">run</span>([args][,options][,livereload])
Run/re-run the script file, which will create a http(s) server.

Start a livereload(tiny-lr) server if it&#x27;s not started yet.

Use the same arguments with [ChildProcess.spawn](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options
) with &#x27;node&#x27; as command.

* `args` - `Array` - Array List of string arguments. The default value is `[&#x27;app.js&#x27;]`.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gulp-express.stop" id="apidoc.element.gulp-express.stop">
        function <span class="apidocSignatureSpan">gulp-express.</span>stop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stop = function () {
    if (server) {
        debug(info(&#x27;kill server&#x27;));
        //use SIGHUP instead of SIGKILL, see issue #34
        server.kill(&#x27;SIGKILL&#x27;);
        //server.removeListener(&#x27;exit&#x27;, callback.serverExit);
        server = undefined;
    }
    if(lr){
        debug(info(&#x27;close livereload server&#x27;));
        lr.close();
        //TODO how to stop tiny-lr from hanging the terminal
        lr = undefined;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```
* `livereload` - `Boolean|Number|Object` - The option for tiny-lr server. The default value is `35729`.
    * `false` - will disable tiny-lr livereload server.
    * `number` - treated as port number of livereload server.
    *  `object` - used to create tiny-lr server `new tinylr.Server(livereload);`.
* Returns a [ChildProcess](http://nodejs.org/api/child_process.html#child_process_class_childprocess) instance of spawned server
.

### server.<span class="apidocCodeKeywordSpan">stop</span>()
Stop the instantiated spawned server programmatically, and the tiny-lr server.

### server.notify([event])
Send a notification to the tiny-lr server in order to trigger a reload on page.
pipe support is added after v0.1.5, so you can also do this:
```js
gulp.src(&#x27;css/*.css&#x27;)
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
